<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>전국지역별출사지 - 사진보기</title>
    <link rel="stylesheet" href="https://s3.ap-northeast-2.amazonaws.com/materials.spartacodingclub.kr/easygpt/default.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" />
    <style>
      .photo-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }

      .photo {
        width: 300px;
        height: 200px;
        margin: 10px;
        background-size: cover;
        background-position: center;
        cursor: pointer;
      }

      .photo:hover {
        opacity: 0.7;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 id="location-title"></h1>

      <div class="photo-container" id="photo-container"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.4/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xml-js/1.6.11/xml-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const location = urlParams.get("location");

      const locationTitle = document.querySelector("#location-title");
      locationTitle.textContent = location;

      const photoContainer = document.querySelector("#photo-container");

        fetch("./tour.xml")
          .then(response => response.text())
          .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
          .then(data => {
    
          const locationData = data.querySelector(`location[name="${location}"]`);
          const images = locationData.querySelectorAll("image");

          images.forEach((image, index) => {
            const photo = document.createElement("a");
            photo.classList.add("photo");
            photo.href = image.getAttribute("src");
            photo.dataset.lightbox = "photo";
            photo.dataset.title = image.getAttribute("title");
            photo.dataset.alt = image.getAttribute("alt");
            photo.dataset.link = image.getAttribute(`data-link${index + 1}`);
            photo.addEventListener("click", function() {
              const link = this.dataset.link;
              window.open(link, "_blank");
            });
            const photoImage = document.createElement("img");
            photoImage.src = image.getAttribute("src");
            photoImage.alt = image.getAttribute("alt");
            photo.appendChild(photoImage);
            photoContainer.appendChild(photo);
          });

          lightbox.option({
            resizeDuration: 200,
            wrapAround: true,
          });
        });
    </script>
  </body>
</html>