<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>사진 보기</title>
    <link rel="stylesheet" href="https://s3.ap-northeast-2.amazonaws.com/materials.spartacodingclub.kr/easygpt/default.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
    <style>
      .photo {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }
      .photo img {
        width: 200px;
        height: 200px;
        margin: 10px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1>사진 보기</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="photo"></div>
        </div>
      </div>
    </div>
    <script>
      // URL에서 "location" 파라미터 값을 추출
      const urlParams = new URLSearchParams(window.location.search);
      const location = urlParams.get("location");

      // 해당 지역의 이미지를 로드
      const xmlHttp = new XMLHttpRequest();
      xmlHttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          const xmlDoc = this.responseXML;
          const images = xmlDoc.getElementsByTagName("location");
          for (let i = 0; i < images.length; i++) {
            if (images[i].getAttribute("name") === location) {
              const photoDiv = document.querySelector(".photo");
              const photoList = images[i].getElementsByTagName("image");
              for (let j = 0; j < photoList.length; j++) {
                const img = document.createElement("img");
                img.src = photoList[j].getAttribute("src");
                img.alt = photoList[j].getAttribute("title");
                img.dataset.link = photoList[j].getAttribute("data-link");
                img.addEventListener("click", function () {
                  window.location.href = this.dataset.link;
                });
                photoDiv.appendChild(img);
              }
              break;
            }
          }
        }
      };
      xmlHttp.open("GET", "tour.xml", true);
      xmlHttp.send();
    </script>
  </body>
</html>